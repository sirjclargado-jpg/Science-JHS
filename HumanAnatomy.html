<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Human Biology Quiz (Grade 7–10)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    .hidden {
      display: none;
    }
    .choice {
      display: block;
      margin: 8px 0;
    }
    button {
      margin-top: 15px;
      padding: 10px 15px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Human Biology Quiz (Grade 7–10)</h1>

<div id="start-screen">
  <input type="text" id="studentName" placeholder="Enter your name">
  <br><br>
  <button onclick="startQuiz()">Start Quiz</button>
</div>

<div id="quiz-screen" class="hidden">
  <h3 id="question-text"></h3>
  <div id="choices"></div>
  <button onclick="nextQuestion()">Next</button>
</div>

<div id="result-screen" class="hidden">
  <h2>Quiz Completed ✅</h2>
  <p id="final-score"></p>
  <h3>Item Analysis</h3>
  <div id="analysis"></div>
</div>

<!-- ✅ JAVASCRIPT MUST BE INSIDE SCRIPT TAGS -->
<script>
let currentIndex = 0;
let score = 0;
let studentAnswers = [];

const questions = [
  {
    question: "It is the infection in the liver that causes it to become inflamed.",
    choices: ["Appendicitis", "Bulimia", "Diarrhea", "Hepatitis"],
    correct: "Hepatitis",
    analysis: {
      correct: "Hepatitis is an infection of the liver.",
      wrong: "The other options involve different organs or conditions."
    }
  }
];

function startQuiz() {
  const name = document.getElementById("studentName").value.trim();
  if (name === "") {
    alert("Please enter your name.");
    return;
  }
  localStorage.setItem("studentName", name);
  document.getElementById("start-screen").classList.add("hidden");
  document.getElementById("quiz-screen").classList.remove("hidden");
  loadQuestion();
}

function loadQuestion() {
  const q = questions[currentIndex];
  document.getElementById("question-text").innerText = q.question;
  const choicesDiv = document.getElementById("choices");
  choicesDiv.innerHTML = "";

  q.choices.forEach(choice => {
    const label = document.createElement("label");
    label.className = "choice";
    label.innerHTML = `
      <input type="radio" name="choice" value="${choice}">
      ${choice}
    `;
    choicesDiv.appendChild(label);
  });
}

function nextQuestion() {
  const selected = document.querySelector('input[name="choice"]:checked');
  if (!selected) {
    alert("Please select an answer.");
    return;
  }

  const answer = selected.value;
  const q = questions[currentIndex];

  studentAnswers.push({
    question: q.question,
    selected: answer,
    correct: q.correct,
    analysis: q.analysis
  });

  if (answer === q.correct) score++;

  currentIndex++;

  if (currentIndex < questions.length) {
    loadQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz() {
  document.getElementById("quiz-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.remove("hidden");

  document.getElementById("final-score").innerText =
    `${localStorage.getItem("studentName")}, your score is ${score} out of ${questions.length}`;

  showAnalysis();
}

function showAnalysis() {
  const analysisDiv = document.getElementById("analysis");
  analysisDiv.innerHTML = "";

  studentAnswers.forEach((item, i) => {
    const div = document.createElement("div");
    div.innerHTML = `
      <p><strong>Q${i + 1}:</strong> ${item.question}</p>
      <p>Correct Answer: ${item.correct}</p>
      <p>${item.analysis.correct}</p>
      <hr>
    `;
    analysisDiv.appendChild(div);
  });
}
</script>

</body>
</html>
